(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[789],{2678:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(5155),i=a(2115),n=a(63),r=a(3998),l=a(6948),c=a(1647),d=a(5626),o=a(6191),m=a(1873),x=a(6485),h=a(6983),p=a(1169),g=a(2529),u=a(8874),f=a(5917),j=a(7181),y=a(9347),N=a(9309);function v(){let e,s=(0,n.useParams)(),a=(0,n.useRouter)(),v=s.id,[b,w]=(0,i.useState)(null),[k,S]=(0,i.useState)([]),[C,D]=(0,i.useState)(!0),[A,$]=(0,i.useState)(null),[_,E]=(0,i.useState)(null),[R,T]=(0,i.useState)({going:0,not_going:0,maybe:0}),[B,P]=(0,i.useState)(!1),[M,F]=(0,i.useState)(!1),[Z,I]=(0,i.useState)(null);(0,i.useEffect)(()=>{v&&(()=>{try{D(!0),$(null);let e=localStorage.getItem("plans");if(!e)return void $("Plan not found");let s=JSON.parse(e).find(e=>e.id===v);if(!s)return void $("Plan not found");w(s);let a=localStorage.getItem("rsvps"),t=a?JSON.parse(a).filter(e=>e.plan_id===v):[];S(t);let i={going:t.filter(e=>"going"===e.status).length,not_going:t.filter(e=>"not_going"===e.status).length,maybe:t.filter(e=>"maybe"===e.status).length};T(i)}catch(e){console.error("Error fetching plan:",e),$("Failed to load plan details")}finally{D(!1)}})()},[v]);let L=async e=>{try{let s="test-user",a=k.find(e=>e.user_id===s);if(a)S(s=>s.map(s=>s.id===a.id?{...s,status:e}:s));else{let a={id:"rsvp_".concat(Date.now()),plan_id:v,user_id:s,status:e,created_at:new Date().toISOString()};S(e=>[...e,a])}let t={going:k.filter(e=>"going"===e.status).length+ +("going"===e),not_going:k.filter(e=>"not_going"===e.status).length+ +("not_going"===e),maybe:k.filter(e=>"maybe"===e.status).length+ +("maybe"===e)};T(t),E(e)}catch(e){console.error("Error updating RSVP:",e)}},O=async()=>{let e="".concat(window.location.origin,"/join/").concat(v);try{await navigator.clipboard.writeText(e),P(!0),setTimeout(()=>P(!1),2e3)}catch(a){let s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),P(!0),setTimeout(()=>P(!1),2e3)}},W=async()=>{if(b){F(!0),I(null);try{let e="".concat(window.location.origin,"/join/").concat(v),s="\uD83C\uDF89 You're invited to: ".concat(b.name,"\n\uD83D\uDCC5 ").concat(b.date," at ").concat(b.time,"\n\uD83D\uDCCD ").concat(b.activity_type,"\n\nJoin here: ").concat(e,"\n\nSent via PlanPal AI"),a=await fetch("/api/send-sms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumbers:["+15551234567"],message:s})}),t=await a.json();if(t.success)I(t),P(!0),setTimeout(()=>P(!1),4e3);else throw Error(t.error||"Failed to send SMS")}catch(e){console.error("SMS error:",e),I({error:e.message})}finally{F(!1)}}};return C?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#ffb829] mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Loading plan details..."})]})}):A?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDE1E"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Plan Not Found"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:A}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(r.$,{onClick:()=>a.push("/my-plans"),className:"w-full bg-gradient-to-r from-[#ffb829] to-[#e6a025] hover:from-[#e6a025] hover:to-[#cc8f1f]",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Back to My Plans"]}),(0,t.jsxs)(r.$,{onClick:()=>a.push("/create"),variant:"outline",className:"w-full",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Create New Plan"]})]})]})}):b?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)(r.$,{variant:"ghost",onClick:()=>a.push("/dashboard"),className:"mb-6",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-4",children:b.eventName||b.name}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 mb-4",children:[(0,t.jsx)(c.E,{variant:"secondary",className:"text-lg px-4 py-2",children:b.activityType||b.activity_type}),b.location&&(0,t.jsxs)(c.E,{variant:"outline",className:"text-lg px-4 py-2 flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),b.location.name]})]})]}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsxs)(l.Zp,{className:"mb-6",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"w-5 h-5"}),"Event Details"]})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(x.A,{className:"w-5 h-5 text-[#ffb829]"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:new Date(b.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Date"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(h.A,{className:"w-5 h-5 text-green-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:(e=b.time,new Date("2000-01-01T".concat(e)).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Time"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(m.A,{className:"w-5 h-5 text-[#ffb829]"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Location TBD"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Venue"})]})]})]})]}),(0,t.jsxs)(l.Zp,{className:"mb-6",children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"w-5 h-5"}),"RSVP"]}),(0,t.jsx)(l.BT,{children:"Let us know if you're coming to this event"})]}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)(r.$,{variant:"going"===_?"default":"outline",onClick:()=>L("going"),className:"flex flex-col items-center gap-2 py-6",children:[(0,t.jsx)(g.A,{className:"w-6 h-6"}),(0,t.jsx)("span",{children:"I'm Going"}),(0,t.jsx)(c.E,{variant:"secondary",children:R.going})]}),(0,t.jsxs)(r.$,{variant:"maybe"===_?"default":"outline",onClick:()=>L("maybe"),className:"flex flex-col items-center gap-2 py-6",children:[(0,t.jsx)("span",{className:"text-lg",children:"\uD83E\uDD14"}),(0,t.jsx)("span",{children:"Maybe"}),(0,t.jsx)(c.E,{variant:"secondary",children:R.maybe})]}),(0,t.jsxs)(r.$,{variant:"not_going"===_?"default":"outline",onClick:()=>L("not_going"),className:"flex flex-col items-center gap-2 py-6",children:[(0,t.jsx)(u.A,{className:"w-6 h-6"}),(0,t.jsx)("span",{children:"Can't Make It"}),(0,t.jsx)(c.E,{variant:"secondary",children:R.not_going})]})]}),_&&(0,t.jsx)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:(0,t.jsxs)("p",{className:"text-green-800 dark:text-green-200 font-medium",children:["You're ","going"===_?"going":"maybe"===_?"maybe going":"not going"," to this event!"]})}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t space-y-3",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.$,{onClick:O,variant:"outline",className:"flex-1 flex items-center gap-2",children:B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.A,{className:"w-4 h-4 text-green-600"}),"Link Copied!"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.A,{className:"w-4 h-4"}),"Copy Link"]})}),(0,t.jsx)(r.$,{onClick:W,disabled:M,variant:"default",className:"flex-1 flex items-center gap-2 bg-gradient-to-r from-[#ffb829] to-[#e6a025] hover:from-[#e6a025] hover:to-[#cc8f1f]",children:M?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]}):(0,t.jsx)(t.Fragment,{children:"\uD83D\uDCF1 Send SMS"})})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:"Copy the link or send professional SMS invites"}),Z&&(0,t.jsx)("div",{className:"p-3 rounded-lg text-sm ".concat(Z.error?"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200":"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200"),children:Z.error?(0,t.jsxs)("p",{children:["❌ SMS failed: ",Z.error]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"✅ SMS sent successfully!"}),(0,t.jsxs)("p",{className:"text-xs mt-1",children:[Z.summary.successful," of ",Z.summary.total," messages delivered"]})]})})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"w-5 h-5 text-[#ffb829]"}),b.venue?"Selected Venue":"Suggested Venues"]}),(0,t.jsx)(l.BT,{children:b.venue?"The venue chosen for this event":"Great places for your ".concat(b.activityType||b.activity_type," event")})]}),(0,t.jsx)(l.Wu,{children:b.venue?(0,t.jsx)(N.A,{venue:b.venue,showFullDetails:!0,className:"border-2 border-[#ffb829]/20 bg-[#ffb829]/5 rounded-lg p-4"}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(e=>{let s={dinner:[{id:"1",name:"The Copper Table",type:"Restaurant",cuisine:"Modern American",rating:4.7,price:"$$$",distance:"0.3 miles away",address:"123 Main Street",description:"Upscale farm-to-table dining with seasonal ingredients"},{id:"2",name:"Sakura Sushi Bar",type:"Restaurant",cuisine:"Japanese",rating:4.5,price:"$$",distance:"0.8 miles away",address:"456 Oak Avenue",description:"Authentic Japanese sushi and sashimi"},{id:"3",name:"Bella Vista Trattoria",type:"Restaurant",cuisine:"Italian",rating:4.6,price:"$$",distance:"1.2 miles away",address:"789 Pine Street",description:"Family-owned Italian restaurant with homemade pasta"}],drinks:[{id:"4",name:"The Velvet Lounge",type:"Cocktail Bar",cuisine:"Craft Cocktails",rating:4.4,price:"$$",distance:"0.5 miles away",address:"321 Elm Street",description:"Sophisticated cocktail bar with artisanal drinks"},{id:"5",name:"Hops & Grains",type:"Brewery",cuisine:"Craft Beer",rating:4.3,price:"$",distance:"0.9 miles away",address:"654 Maple Drive",description:"Local brewery with food trucks and live music"},{id:"6",name:"Skyline Rooftop",type:"Rooftop Bar",cuisine:"Wine & Cocktails",rating:4.8,price:"$$$",distance:"1.1 miles away",address:"987 Hilltop Road",description:"Rooftop bar with panoramic city views"}],coffee:[{id:"7",name:"Brew & Bean",type:"Coffee Shop",cuisine:"Artisan Coffee",rating:4.6,price:"$",distance:"0.2 miles away",address:"147 Coffee Lane",description:"Third-wave coffee shop with house-roasted beans"},{id:"8",name:"The Daily Grind",type:"Caf\xe9",cuisine:"Coffee & Pastries",rating:4.4,price:"$",distance:"0.6 miles away",address:"258 Bakery Street",description:"Cozy caf\xe9 with fresh pastries and specialty drinks"},{id:"9",name:"Urban Roast",type:"Coffee Roastery",cuisine:"Premium Coffee",rating:4.7,price:"$$",distance:"1.0 miles away",address:"369 Roast Way",description:"Coffee roastery with tasting room and light bites"}],activity:[{id:"10",name:"Adventure Zone",type:"Entertainment Center",cuisine:"Activities",rating:4.5,price:"$$",distance:"0.4 miles away",address:"741 Fun Street",description:"Indoor rock climbing, escape rooms, and arcade games"},{id:"11",name:"Riverside Park",type:"Outdoor Recreation",cuisine:"Nature",rating:4.6,price:"$",distance:"0.7 miles away",address:"852 River Road",description:"Scenic park with hiking trails and picnic areas"},{id:"12",name:"Creative Studio",type:"Art Workshop",cuisine:"Creative",rating:4.3,price:"$$",distance:"1.3 miles away",address:"963 Art Avenue",description:"Art classes, pottery, and creative workshops"}]};return s[e]||s.activity})(b.activityType||b.activity_type||"dining").map(e=>(0,t.jsx)(l.Zp,{className:"hover:shadow-md transition-shadow border-2 hover:border-[#ffb829]/30 dark:hover:border-[#ffb829]/60",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-slate-900 dark:text-white text-sm line-clamp-2",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[e.type," • ",e.cuisine||e.type]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(y.A,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),(0,t.jsx)("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:e.rating})]}),(0,t.jsx)(c.E,{variant:"outline",className:"text-xs px-2 py-1",children:e.price})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.A,{className:"w-3 h-3 text-slate-500"}),(0,t.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:e.distance})]}),(0,t.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400 line-clamp-2",children:e.description})]})})},e.id))})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-lg",children:"RSVP Summary"})}),(0,t.jsxs)(l.Wu,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"w-4 h-4 text-green-600"}),"Going"]}),(0,t.jsx)(c.E,{variant:"secondary",children:R.going})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-lg",children:"\uD83E\uDD14"}),"Maybe"]}),(0,t.jsx)(c.E,{variant:"secondary",children:R.maybe})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 text-red-600"}),"Not Going"]}),(0,t.jsx)(c.E,{variant:"secondary",children:R.not_going})]}),(0,t.jsx)("div",{className:"pt-3 border-t",children:(0,t.jsxs)("div",{className:"flex justify-between items-center font-medium",children:[(0,t.jsx)("span",{children:"Total Responses"}),(0,t.jsx)(c.E,{variant:"outline",children:R.going+R.maybe+R.not_going})]})})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{className:"text-lg",children:"Event Info"})}),(0,t.jsxs)(l.Wu,{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Created"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(b.created_at||Date.now()).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Event ID"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400 font-mono text-xs",children:b.id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Share Code"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400 font-mono text-xs",children:v})]})]})]})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Plan not found"}),(0,t.jsx)(r.$,{onClick:()=>a.push("/dashboard"),className:"mt-4",children:"Back to Dashboard"})]})})}},2713:(e,s,a)=>{Promise.resolve().then(a.bind(a,2678))},5917:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6191:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7181:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])}},e=>{e.O(0,[707,691,940,441,255,358],()=>e(e.s=2713)),_N_E=e.O()}]);